μ•μ•μ–΄, μν„! λ„¤κ°€ FE/BE(ν”„λ΅ νΈμ—”λ“/λ°±μ—”λ“)λ” μ™„μ „ μ²μμ΄λΌκ³  ν–μΌλ‹κΉ, μ•μΌλ΅ μ°λ¦¬κ°€ ν•  **"AI λ¨λΈ ν›λ ¨"**κ³Ό, λ„¤κ°€ ν€μ¥λ‹ν•ν… λ°›μ€ **"FastAPI μ„λ²„ κ°λ°"**μ„ μ–΄λ–»κ² μ—°κ²°ν•΄μ•Ό ν•λ”μ§€ λ‚΄κ°€ λ…ν™•ν•κ² 'ν¬μΈνΈ'λ¥Ό μ§μ–΄μ¤„κ².

λ„¤κ°€ /docsκ°€ λ­”μ§€ λ°λλ κ²ƒμ²λΌ, μ΄ λ‘ κ°λ” μ™„μ „ν λ‹¤λ¥Έ μ‘μ—…μ΄λΌλ” κ±Έ μ΄ν•΄ν•λ” κ² μ²« λ²μ§Έ ν¬μΈνΈμ•Ό.

π€ νμΈνλ‹ μ§„ν–‰ 3λ‹¨κ³„ (κ°λ… & ν¬μΈνΈ)
μ°λ¦¬μ λ©ν‘λ” ohwx_kfood_style.safetensorsλΌλ” **"μ°λ¦¬λ§μ K-Food μ§κ° LoRA νμΌ"**μ„ λ§λ“¤μ–΄μ„, main.py (FastAPI μ„λ²„)μ— μ¥μ°©ν•λ” κ±°μ•Ό.

γ€Point 1γ€‘ "μ¤ν”„λΌμΈ" λ°μ΄ν„°μ…‹ μ™„μ„± (κ°€μ¥ μ¤‘μ”!)
μ΄κ±΄ λ„¤κ°€ main.pyλ¥Ό μΌκΈ° μ „μ— μ™„λ£ν•΄μ•Ό ν•λ”, κ°€μ¥ μ¤‘μ”ν• 'μ¬λ£' μ¤€λΉ„ λ‹¨κ³„μ•Ό.

To-Do: lora_training/ ν΄λ”μ— μ°λ¦¬κ°€ μ •ν• "μΊ΅μ… ν™©κΈ μμ„"λ€λ΅ λ°μ΄ν„°μ…‹ μ™„μ„±ν•κΈ°.
images/ (λ–΅λ³¶μ΄, μ‚Όκ²Ήμ‚΄, μΉν‚¨... μ„μ–΄μ„ 20~100μ¥)
captions/ (λ¨λ“  μΊ΅μ…μ— ohwx_kfood_style,λ΅ μ‹μ‘, ν€„λ¦¬ν‹° νƒκ·Έ(masterpiece λ“±) ν¬ν•¨)
ν•µμ‹¬ ν¬μΈνΈ (Why?):
μ΄κ² λ°”λ΅ **"Data-centric AI"**μ ν•µμ‹¬μ΄μ•Ό. (Ref: Data-centric AI, Andrew Ng)
μ°λ¦¬κ°€ μ—¬κΈ°μ„ μΊ΅μ…(μ£Όμ„)μ„ μ–Όλ§λ‚ μ •κµν•κ² λ‹¤λλƒμ— λ”°λΌ, AIκ°€ 'μ¤νƒ€μΌ'κ³Ό 'ν”Όμ‚¬μ²΄'λ¥Ό λ¶„λ¦¬(Disentangle)ν•λ” λ¥λ ¥μ΄ κ²°μ •λΌ.
μ΄κ² λ§ν•λ©΄, ν›λ ¨(Phase 2)μ€ ν•΄λ³Ό ν•„μ”λ„ μ—†μ΄ λ§ν•΄.
γ€Point 2γ€‘ "μ¤ν”„λΌμΈ" λ¨λΈ ν›λ ¨ (GPU μ‘μ—…)
LoRA ν›λ ¨μ€ python main.py (FastAPI μ„λ²„)μ—μ„ μΌμ–΄λ‚λ” κ² μ•„λ‹μ•Ό. μ΄κ±΄ λ„¤κ°€ μ–΄μ  ν…μ¤νΈν–λ (soohyun) κ°€μƒν™κ²½μ—μ„, L4 GPUλ¥Ό 100% μ‚¬μ©ν•΄μ„ λλ¦¬λ” μ™„μ „ν λ³„κ°μ 'λ¬΄κ±°μ΄' μ‘μ—…μ΄μ•Ό.

To-Do: (soohyun) κ°€μƒν™κ²½μ—μ„ μ°λ¦¬κ°€ μ¤€λΉ„ν• train.sh μ¤ν¬λ¦½νΈ μ‹¤ν–‰ν•κΈ°.
bash train.sh
ν•µμ‹¬ ν¬μΈνΈ (What happens?):
accelerate launch ... (ν›λ ¨ μ¤ν¬λ¦½νΈ)κ°€ μ‹¤ν–‰λ  κ±°μ•Ό.
μ΄ μ¤ν¬λ¦½νΈκ°€ [Point 1]μ lora_training/ ν΄λ”λ¥Ό μ‹Ή μ½μ–΄.
W&B (Weights & Biases)μ— ν›λ ¨ κ³Όμ •(Loss κ·Έλν”„, μƒν” μ΄λ―Έμ§€)μ΄ μ‹¤μ‹κ°„μΌλ΅ κΈ°λ΅λ  κ±°μ•Ό. (μ΄κ±Έ λ³΄λ©΄μ„ ν›λ ¨μ΄ μ λλ”μ§€ λ¨λ‹ν„°λ§ν•΄μ•Ό ν•΄.)
ν›λ ¨μ΄ λλ‚λ©΄, lora_output/ ν΄λ”μ— ohwx_kfood_style.safetensors (μ•½ 10MB~100MB) νμΌμ΄ "μ§ !" ν•κ³  μƒμ„±λΌ.
μ΄ νμΌμ΄ λ°”λ΅ μ°λ¦¬κ°€ λ§λ“  **"AI λ¨λΈμ λ‡(LoRA)"**μ•Ό.
γ€Point 3γ€‘ "μ¨λΌμΈ" μ„λΉ„μ¤ ν†µν•© (FastAPI + /docs)
λ“λ””μ–΄ λ„¤κ°€ λ°›μ€ FeedlyAI λ§¤λ‰΄μ–Όκ³Ό μ—°κ²°λλ” λ¶€λ¶„μ΄μ•Ό. [Point 2]μ—μ„ λ§λ“  ohwx_kfood_style.safetensors νμΌμ„, FastAPI μ„λ²„(main.py)κ°€ μ“Έ μ μκ² ν•΄μ¤μ•Ό ν•΄.

To-Do 1 (νμΌ μ΄λ™):
ohwx_kfood_style.safetensors νμΌμ„ ν€μ κ³µμ© μ €μ¥μ†(ASSETS_DIR=/opt/feedlyai/assets)λ΅ μ®κ²¨.
μ: /opt/feedlyai/assets/sh/models/ohwx_kfood_style.safetensors
To-Do 2 (FastAPI μ½”λ“ μ‘μ„±):
λ„¤κ°€ λ°›μ€ ~/feedlyai-work ν΄λ”μ main.pyλ¥Ό μ—΄μ–΄.
ν€ κ°€μ΄λ“λ€λ΅ λ„μ API μ—”λ“ν¬μΈνΈλ¥Ό λ§λ“¤μ–΄: POST /api/sh/enhance
μ΄ ν•¨μ μ•μ—, μ°λ¦¬κ°€ app_with_lora_v3.pyμ—μ„ μΌλ diffusers νμ΄ν”„λΌμΈ μ½”λ“λ¥Ό "κ·Έλ€λ΅" μ§‘μ–΄λ„£μ–΄.
ν•µμ‹¬ ν¬μΈνΈ (The FE/BE Connection):
app.py (Streamlit)μ—μ„λ” λ¨λΈμ„ load_model() ν•¨μλ΅ λ§¨ μ„μ— μ¬λ Έμ§€?
main.py (FastAPI)μ—μ„λ„ λ‘κ°™μ•„. FastAPIκ°€ μ‹μ‘λ  λ•(Startup Event) μ΄ LoRA λ¨λΈμ„ L4 GPU λ©”λ¨λ¦¬μ— λ”± ν• λ²λ§ μ¬λ ¤λ‘κ² λ§λ“¤ κ±°μ•Ό.
pipe.load_lora_weights(...) κ²½λ΅λ¥Ό ostris LoRA λ€μ‹ , [To-Do 1]μ—μ„ μ®κΈ΄ **'μ°λ¦¬μ LoRA νμΌ κ²½λ΅'**λ΅ λ°”κΏ”μ£Όλ” κ±°μ§€.
To-Do 3 (ν…μ¤νΈ):
python main.pyλ΅ FastAPI μ„λ²„ μ‹¤ν–‰.
λΈλΌμ°μ €μ—μ„ http://[GCP_IP]:8013/docs μ ‘μ†.
/api/sh/enhance μ—”λ“ν¬μΈνΈλ¥Ό μ°Ύμ•„μ„, [Try it out]μΌλ΅ λ–΅λ³¶μ΄ μ‚¬μ§„μ„ μ—…λ΅λ“ν•΄ λ΄.
"μ°λ¦¬ K-Food LoRAκ°€ μ μ©λ" κ°•ν™” μ΄λ―Έμ§€κ°€ κ²°κ³Όλ΅ ν€μ–΄λ‚μ¤λ©΄... ν”„λ΅μ νΈ μ„±κ³µμ΄μ•Ό.
μ”μ•½:

μ§€κΈ λ‹Ήμ¥: lora_training/ ν΄λ”μ— λ°μ΄ν„°/μΊ΅μ… 100% μ™„μ„±ν•κΈ°. (μ΄κ² 90%)
κ·Έ λ‹¤μ: bash train.shλ΅ LoRA νμΌ(.safetensors) λ§λ“¤κΈ°.
λ§μ§€λ§‰: main.pyμ— API λ§λ“¤κ³ , μ΄ LoRA νμΌ λ΅λ“ν•΄μ„ /docsλ΅ ν…μ¤νΈν•κΈ°.
μ–΄λ•? "νμΈνλ‹"μ΄λΌλ” κ² main.pyμ™€λ” λ³„κ°μ μ‘μ—…μ΄κ³ , κ·Έ **"κ²°κ³Όλ¬Ό(.safetensors)"**λ§ main.pyμ— **'λ¶€ν’'**μ²λΌ λΌμ› λ„£λ”λ‹¤λ” κ°λ…, μ΄μ  ν™•μ‹¤ν μ΅ν”μ–΄?